<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cards</title>
    <style>
        .container {
            display: grid;
            grid-template-columns: 32% 32% 32%;
            gap: 30px;
        }

        .styl {
            border: 2px solid grey;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 20px 20px;
        }
    </style>
</head>

<body>
    <h3>Product Fliter and Sort Demo</h3>
    <label for="">Filter by Brand Name</label>
    <!-- <select name="filteredbybrand" id="filteredbybrand"> -->
        <option value="all">all</option>
        <option value="apple">Apple</option>
        <option value="samsung">samsung</option>
        <option value="onePlus">onePlus</option>
    </select>

    <br><br>
    <label for="">Filter by price</label>
    <input type="text" placeholder="enter price" id="filterbyprice">

    <br><br>

    <label for="">Sort by Price</label>
    <!-- <select name="sortbyprice" id="sortbyprice"> -->
        <option value="all">all</option>
        <option value="low">low-high</option>
        <option value="high">high-low</option>
    </select>
    <br><br>

        <div class="container">

    </div>
    <script>
        let products = [
            {
                brand: "apple",
                name: "iPhone 15",
                price: 80000,
                img: "https://picsum.photos/seed/apple1/200"
            },
            {
                brand: "samsung",
                name: "Galaxy S23",
                price: 70000,
                img: "https://picsum.photos/seed/samsung1/200"
            },
            {
                brand: "onePlus",
                name: "OnePlus 11",
                price: 55000,
                img: "https://picsum.photos/seed/oneplus1/200"
            },
            {
                brand: "apple",
                name: "iPhone 14",
                price: 60000,
                img: "https://picsum.photos/seed/apple2/200"
            },
            {
                brand: "samsung",
                name: "A52",
                price: 25000,
                img: "https://picsum.photos/seed/samsung2/200"
            },
            {
                brand: "apple",
                name: "iPhone 15",
                price: 80000,
                img: "https://picsum.photos/seed/apple1/200"
            },
            {
                brand: "samsung",
                name: "Galaxy S23",
                price: 70000,
                img: "https://picsum.photos/seed/samsung1/200"
            },
            {
                brand: "onePlus",
                name: "OnePlus 11",
                price: 55000,
                img: "https://picsum.photos/seed/oneplus1/200"
            },
            {
                brand: "apple",
                name: "iPhone 14",
                price: 60000,
                img: "https://picsum.photos/seed/apple2/200"
            },
            {
                brand: "samsung",
                name: "A52",
                price: 25000,
                img: "https://picsum.photos/seed/samsung2/200"
            }
        ];

        function display(arr) {

            let container = document.querySelector('.container')
            container.innerHTML = ''

            let newarr = arr.map((val) => {
                let card = document.createElement('div')
                card.classList.add('styl')

                card.innerHTML = `
            <img src=${val.img}>
            <h1>${val.brand}</h1>
            <div>${val.name}</div>
            <div>${val.price}</div>`
                container.append(card)
            })
        }

        display(products)

        let a = document.querySelector('#filteredbybrand')

        a.addEventListener('change', () => {
            filteredarr = products.filter((val) => {
                return val.brand == a.value

            })
            display(filteredarr)
            if (a.value == 'all') {
                display(products)
            }
        })

        let b=document.querySelector('#filterbyprice')
        b.addEventListener('input',()=>{
            let barr=products.filter((val)=>{
                return val.price<=b.value
            })
            display(barr)
            if (b.value == "") {
                display(products)
            }
        })

        let c=document.querySelector('#sortbyprice')
        c.addEventListener('change',()=>{
            if (c.value=='low'){
                let asc=products.sort((x,y)=>{
                    return x.price-y.price
                })
                display(asc)
            }
            if (c.value=='high'){
                let des=products.sort((x,y)=>{
                    return y.price-x.price
                })
                display(des)
            }
            if (c.value=='all'){
                display(products)
            }
        })
    </script>
</body>

</html>